<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ansar Projet</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Open+Sans:wght@300;400;600;700&display=swap');
        
        :root {
            --primary-color: #073332;
            --secondary-color: #1f4a49;
            --accent-color: #9b9c28;
            --accent-glow: rgba(155, 156, 40, 0.4);
            --bg-color: #073332;
            --text-color: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.7);
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .holographic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: 
                radial-gradient(
                    circle at 30% 40%, 
                    var(--secondary-color) 0%, 
                    transparent 25%),
                radial-gradient(
                    circle at 70% 60%, 
                    var(--primary-color) 0%, 
                    transparent 25%);
            opacity: 0.4;
            z-index: -1;
            animation: bgRotate 60s linear infinite;
        }
        
        @keyframes bgRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .ansar-glass {
            background: rgba(7, 51, 50, 0.6);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(155, 156, 40, 0.2);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(155, 156, 40, 0.1),
                inset 0 0 30px rgba(31, 74, 73, 0.3);
            border-radius: 20px;
        }
        
        .holographic-effect {
            position: relative;
            overflow: hidden;
        }
        
        .holographic-effect::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                transparent,
                transparent,
                transparent,
                var(--accent-glow),
                transparent
            );
            transform: rotate(30deg);
            animation: hologram 8s linear infinite;
            z-index: -1;
        }
        
        @keyframes hologram {
            0% { transform: translateY(-100%) rotate(30deg); }
            100% { transform: translateY(100%) rotate(30deg); }
        }
        
        .counter-display {
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px var(--accent-glow);
            transition: all 0.3s ease;
        }
        
        .btn-ansar {
            background: linear-gradient(135deg, rgba(155, 156, 40, 0.2), transparent);
            border: 1px solid var(--accent-color);
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-ansar:hover {
            background: linear-gradient(135deg, rgba(155, 156, 40, 0.3), transparent);
            box-shadow: 0 0 20px var(--accent-glow);
            transform: translateY(-2px);
        }
        
        .btn-ansar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(155, 156, 40, 0.2),
                transparent
            );
            transition: all 0.6s ease;
        }
        
        .btn-ansar:hover::before {
            left: 100%;
        }
        
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(7, 51, 50, 0.9);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            z-index: 100;
            display: none;
            box-shadow: 0 0 30px var(--accent-glow);
            text-shadow: 0 0 10px var(--accent-glow);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 200;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: rgba(7, 51, 50, 0.9);
            border: 1px solid var(--accent-color);
            padding: 30px;
            border-radius: 16px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 0 40px var(--accent-glow);
        }
        
        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        .modal-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background: rgba(31, 74, 73, 0.5);
            border: 1px solid var(--accent-color);
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
        }
        
        .modal-input:focus {
            outline: none;
            box-shadow: 0 0 10px var(--accent-glow);
        }
        
        .form-input {
            background: rgba(31, 74, 73, 0.5);
            border: 1px solid var(--accent-color);
            color: var(--text-color);
            border-radius: 8px;
            padding: 12px 15px;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 10px var(--accent-glow);
            border-color: var(--accent-color);
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent-color);
            font-weight: 600;
        }
        
        .form-radio {
            accent-color: var(--accent-color);
        }
        
        .form-checkbox {
            accent-color: var(--accent-color);
        }
        
        .business-card {
            transition: all 0.3s ease;
            background: rgba(7, 51, 50, 0.6);
            border: 1px solid rgba(155, 156, 40, 0.2);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .business-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px var(--accent-glow);
        }
        
        .hidden-section {
            display: none;
        }
        
        .form-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        
        .form-container.active {
            max-height: 1500px;
            transition: max-height 0.8s ease-in;
        }
        #admin-section,
#success-promotion,
#success-financement {
    display: none; /* S'assurer qu'elles sont cachées par défaut */
}
        .page-transition {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .business-details {
            animation: slideUp 0.4s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @media (max-width: 640px) {
            .counter-display {
                font-size: 3rem;
            }
        }
      
      #success-promotion {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
      #success-promotion .popup-content {
    background: #073332;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    border: 1px solid #9b9c28;
    max-width: 80%;
}
    </style>
</head>
<body>
    <div class="holographic-bg"></div>
    
    <div class="min-h-screen flex flex-col items-center justify-center p-4">
        <!-- Conteneur principal -->
        <div class="ansar-glass w-full max-w-4xl overflow-hidden p-6 holographic-effect">
            <!-- Page d'accueil -->
            <div id="home-page" class="page-transition">
                <!-- En-tête -->
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-bold mb-2 font-['Orbitron'] text-transparent bg-clip-text bg-gradient-to-r from-white to-var(--accent-color)">
                        ANSAR PROJET
                    </h1>
                    <p class="text-var(--accent-color)">Plateforme de développement professionnel</p>
                </header>

                <!-- Boutons principaux -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <button onclick="navigateTo('promotion')" class="btn-ansar py-4 px-6 rounded-lg flex flex-col items-center justify-center">
                        <i class="fas fa-money-bill-wave text-2xl mb-2"></i>
                        Financement - Promotion 
                    </button>
                   
                    <button onclick="navigateTo('business')" class="btn-ansar py-4 px-6 rounded-lg flex flex-col items-center justify-center">
                        <i class="fas fa-briefcase text-2xl mb-2"></i>
                        Profils
                    </button>
                </div>

                <!-- Lien admin -->
                <div class="text-center mt-6">
                    <a href="#" onclick="showAdminSection()" class="text-var(--accent-color) hover:text-white underline">Espace réservé aux membres</a>
                </div>
            </div>

            <!-- Page Promotion -->
            <div id="promotion-page" class="hidden-section page-transition">
                <button onclick="navigateTo('home')" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Promotion des Métiers</h2>
                    <p class="text-center text-var(--accent-color)/80 mb-6">Objectif : Mettre en avant les compétences des membres</p>
                    
                    <form id="promotionForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="form-label" for="nom">Nom & Prénom</label>
                                <input type="text" id="nom" class="form-input" required>
                            </div>
                            <div>
                                <label class="form-label" for="dob">Date de Naissance</label>
                                <input type="date" id="dob" class="form-input" required>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label">Êtes-vous membre de l'association ?</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="membre" value="oui" class="form-radio h-5 w-5" required>
                                    <span class="ml-2">Oui</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="membre" value="non" class="form-radio h-5 w-5">
                                    <span class="ml-2">Non</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label" for="metier">Métier</label>
                            <input type="text" id="metier" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="experience">Années d'expérience</label>
                            <input type="number" id="experience" min="0" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="description">Description</label>
                            <textarea id="description" rows="4" class="form-input" required></textarea>
                        </div>
                        
                        <div>
                            <label class="form-label" for="adresse">Emplacement (Adresse)</label>
                            <input type="text" id="adresse" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="contact">Contact</label>
                            <input type="tel" id="contact" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="email">Adresse Gmail <span class="text-red-500">*</span></label>
                            <input type="email" id="email" class="form-input" required>
                        </div>
                        
                        <div class="pt-4">
                            <label class="form-label">J'ai besoin de :</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="besoins" value="site web" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un site web</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="besoins" value="affiche" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Une affiche</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="besoins" value="portfolio" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un portfolio</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-end pt-6">
                            <button type="button" onclick="submitPromotionForm()" class="btn-ansar py-3 px-6 rounded-lg">
                                Envoyer mon dossier
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Page Financement -->
            <div id="financement-page" class="hidden-section page-transition">
                <button onclick="navigateTo('home')" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Financement d'un Projet</h2>
                    
                    <form id="financementForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="form-label" for="f-nom">Nom & Prénom</label>
                                <input type="text" id="f-nom" class="form-input" required>
                            </div>
                            <div>
                                <label class="form-label" for="f-dob">Date de Naissance</label>
                                <input type="date" id="f-dob" class="form-input" required>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label">Êtes-vous membre de l'association ?</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="f-membre" value="oui" class="form-radio h-5 w-5" required>
                                    <span class="ml-2">Oui</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="f-membre" value="non" class="form-radio h-5 w-5">
                                    <span class="ml-2">Non</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="form-label" for="titre-projet">Titre de votre projet <span class="text-red-500">*</span></label>
                            <input type="text" id="titre-projet" class="form-input" required>
                        </div>
                        
                        <div>
                            <label class="form-label" for="description-projet">Description détaillée <span class="text-red-500">*</span></label>
                            <textarea id="description-projet" rows="4" class="form-input" required></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="form-label" for="budget">Budget <span class="text-red-500">*</span></label>
                                <input type="number" id="budget" min="0" class="form-input" required>
                            </div>
                            <div>
                                <label class="form-label" for="delai">Délai <span class="text-red-500">*</span></label>
                                <input type="text" id="delai" class="form-input" placeholder="Ex: 3 mois" required>
                            </div>
                        </div>
                        
                        <div class="pt-4">
                            <label class="form-label">J'ai besoin de :</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="f-besoins" value="site web" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un site web</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="f-besoins" value="affiche" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Une affiche</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" name="f-besoins" value="portfolio" class="form-checkbox h-5 w-5">
                                    <span class="ml-2">Un portfolio</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="flex justify-end pt-6">
                            <button type="button" onclick="submitFinancementForm()" class="btn-ansar py-3 px-6 rounded-lg">
                                Envoyer mon dossier
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Page Business -->
            <div id="business-page" class="hidden-section page-transition">
                <button onclick="navigateTo('home')" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Retour
                </button>
                
                    <h2 class="text-2xl font-bold text-center mb-8 font-['Orbitron']">Nos Professionnels</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="business-cards">
                        <!-- Les cartes seront générées dynamiquement -->
                    </div>
            </div>

            <!-- Modal Business Details -->
<div id="business-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50">
  
                <div class="ansar-glass rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 business-details">
                    <div class="flex justify-between items-start mb-4">
                        <h3 id="modal-title" class="text-2xl font-bold font-['Orbitron']"></h3>
                        <button onclick="hideBusinessDetails()" class="text-var(--accent-color) hover:text-white">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                      
                    <div id="modal-content" class="space-y-4">
                        <!-- Content will be loaded here -->
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button onclick="hideBusinessDetails()" class="btn-ansar py-2 px-4 rounded">
                            Fermer
                        </button>
                    </div>
                </div> 
            </div>

            <!-- Messages de succès -->
            <div id="success-promotion" class="hidden-section fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="ansar-glass rounded-lg shadow-xl p-8 max-w-md w-full text-center">
                    <div class="text-green-500 text-5xl mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Merci !</h3>
                    <p class="mb-6" id="success-promotion-message">Le groupe Ansar projet vous contactera dans un délai de 48 à 72h.</p>
                    <button onclick="hideSuccessMessage('promotion')" class="btn-ansar py-2 px-6 rounded-lg">
                        OK
                    </button>
                </div>
            </div>

            <div id="success-financement" class="hidden-section fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="ansar-glass rounded-lg shadow-xl p-8 max-w-md w-full text-center">
                    <div class="text-green-500 text-5xl mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                   <h3 class="text-2xl font-bold mb-4">Merci !</h3>
                    <p class="mb-6" id="success-financement-message">Le groupe Ansar projet vous contactera dans un délai de 3 à 5 jours.</p>
                    <button onclick="hideSuccessMessage('financement')" class="btn-ansar py-2 px-6 rounded-lg">
                        OK
                    </button>
                </div>
            </div>

            <!-- Section Admin -->
            <div id="admin-section" class="hidden-section fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="ansar-glass rounded-lg shadow-xl p-8 max-w-md w-full">
                    <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">ESPACE RÉSERVÉ À L'ADMINISTRATION</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="form-label" for="code1">Code secret 1</label>
                            <input type="password" id="code1" class="form-input">
                        </div>
                        
                        <div>
                            <label class="form-label" for="code2">Code secret 2</label>
                            <input type="password" id="code2" class="form-input">
                        </div>
                        
                        <div class="pt-4 flex justify-between">
                            <button onclick="hideAdminSection()" class="btn-ansar py-2 px-4 rounded">
                                Annuler
                            </button>
                            <button onclick="verifyAdminCodes()" class="btn-ansar py-2 px-4 rounded">
                                Valider
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tableau de bord Admin -->
            <div id="admin-dashboard" class="hidden-section page-transition pb-16">
                <!-- Dans la section admin-dashboard -->
<button onclick="navigateTo('home')" class="btn-ansar mb-6 py-2 px-4 rounded-lg">
    <i class="fas fa-arrow-left mr-2"></i> Retour
</button>
                
                <div class="ansar-glass rounded-xl p-6">
                    <h2 class="text-3xl font-bold text-center mb-6 font-['Orbitron']">Tableau de bord Admin</h2>
                    
                    <div class="flex flex-wrap justify-center gap-4 mb-8">
                        <button onclick="showAdminForm('promotion')" class="btn-ansar py-3 px-6 rounded-lg">
                            <i class="fas fa-bullhorn mr-2"></i> Ajouter Métier
                        </button>
                        
                        <button onclick="showAdminBusinessList()" class="btn-ansar py-3 px-6 rounded-lg">
                            <i class="fas fa-briefcase mr-2"></i> Gérer Business
                        </button>
                        
                    </div>

                    <!-- Formulaire Admin Promotion -->
                    <div id="admin-promotion-form" class="form-container hidden-section">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Ajouter un Métier</h2>
                            
                            <form id="adminPromotionForm" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label" for="a-nom">Nom & Prénom</label>
                                        <input type="text" id="a-nom" class="form-input" required>
                                    </div>
                                    <div>
                                        <label class="form-label" for="a-dob">Date de Naissance</label>
                                        <input type="date" id="a-dob" class="form-input">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-membre">Membre de l'association</label>
                                    <select id="a-membre" class="form-input">
                                        <option value="oui">Oui</option>
                                        <option value="non">Non</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-metier">Métier</label>
                                    <input type="text" id="a-metier" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-experience">Années d'expérience</label>
                                    <input type="number" id="a-experience" min="0" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-description">Description</label>
                                    <textarea id="a-description" rows="4" class="form-input" required></textarea>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-adresse">Emplacement (Adresse)</label>
                                    <input type="text" id="a-adresse" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-contact">Contact</label>
                                    <input type="tel" id="a-contact" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-email">Adresse Email</label>
                                    <input type="email" id="a-email" class="form-input">
                                </div>
                                
                                <div>
                                    <label class="form-label" for="a-image">Lien de l'image (PostImages ou autre)</label>
                                    <input type="url" id="a-image" class="form-input" placeholder="https://postimages.org/example.jpg">
                                </div>
                                <div>
    <label class="form-label" for="a-website">Site Web (URL)</label>
    <input type="url" id="a-website" class="form-input" placeholder="https://example.com">
</div>

<div>
    <label class="form-label" for="a-portfolio">Portfolio (URL)</label>
    <input type="url" id="a-portfolio" class="form-input" placeholder="https://portfolio.example.com">
</div>
                                <div class="pt-4">
                                    <label class="form-label">Services proposés</label>
                                    <div class="flex flex-wrap gap-4">
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="a-services" value="site web" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Site web</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="a-services" value="affiche" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Affiche</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="a-services" value="portfolio" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Portfolio</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-[#073332] sticky bottom-0 border-t border-gray-700">
                                    <button type="button" onclick="saveBusiness()" class="btn-ansar py-3 px-6 rounded-lg">
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Formulaire Admin Financement -->
                    <div id="admin-financement-form" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Ajouter un Projet</h2>
                            
                            <form id="adminFinancementForm" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label" for="af-nom">Nom & Prénom</label>
                                        <input type="text" id="af-nom" class="form-input" required>
                                    </div>
                                    <div>
                                        <label class="form-label" for="af-dob">Date de Naissance</label>
                                        <input type="date" id="af-dob" class="form-input">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-membre">Membre de l'association</label>
                                    <select id="af-membre" class="form-input">
                                        <option value="oui">Oui</option>
                                        <option value="non">Non</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-titre">Titre du projet</label>
                                    <input type="text" id="af-titre" class="form-input" required>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-description">Description</label>
                                    <textarea id="af-description" rows="4" class="form-input" required></textarea>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label" for="af-budget">Budget</label>
                                        <input type="number" id="af-budget" min="0" class="form-input" required>
                                    </div>
                                    <div>
                                        <label class="form-label" for="af-delai">Délai</label>
                                        <input type="text" id="af-delai" class="form-input" placeholder="Ex: 3 mois" required>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label" for="af-image">Lien de l'image (PostImages ou autre)</label>
                                    <input type="url" id="af-image" class="form-input" placeholder="https://postimages.org/example.jpg">
                                </div>
                                
                                <div class="pt-4">
                                    <label class="form-label">Besoins</label>
                                    <div class="flex flex-wrap gap-4">
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="af-besoins" value="site web" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Site web</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="af-besoins" value="affiche" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Affiche</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="checkbox" name="af-besoins" value="portfolio" class="form-checkbox h-5 w-5">
                                            <span class="ml-2">Portfolio</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end pt-6">
                                    <button type="button" onclick="saveProject()" class="btn-ansar py-3 px-6 rounded-lg">
                                        Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Liste Admin Business -->
                    <div id="admin-business-list" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Gérer les Professionnels</h2>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-opacity-20 bg-gray-800">
                                    <thead>
                                        <tr class="border-b border-gray-700">
                                            <th class="px-4 py-3 text-left">Nom</th>
                                            <th class="px-4 py-3 text-left">Métier</th>
                                            <th class="px-4 py-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="business-list-body">
                                        <!-- Les données seront chargées dynamiquement ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Liste Admin Projets -->
                    <div id="admin-project-list" class="form-container hidden-section">
                        <div class="ansar-glass rounded-xl p-6">
                            <h2 class="text-2xl font-bold text-center mb-6 font-['Orbitron']">Gérer les Projets</h2>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-opacity-20 bg-gray-800">
                                    <thead>
                                        <tr class="border-b border-gray-700">
                                            <th class="px-4 py-3 text-left">Titre</th>
                                            <th class="px-4 py-3 text-left">Porteur</th>
                                            <th class="px-4 py-3 text-left">Budget</th>
                                            <th class="px-4 py-3 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="project-list-body">
                                        <!-- Les données seront chargées dynamiquement ici -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA-TpblN0YnekG2tKFRhjOwwEd80qke5pk",
            authDomain: "ansar-69617.firebaseapp.com",
            projectId: "ansar-69617",
            storageBucket: "ansar-69617.appspot.com",
            messagingSenderId: "1075104578958",
            appId: "1:1075104578958:web:b5d55c76def4d1d430b8df",
            measurementId: "G-5XLSPLXH81"
        };

        // Configuration EmailJS
        emailjs.init("t69wuFYR5Gno3G4py"); // Compte principal

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Variables globales
        const adminCodes = {
            code1: "ANSAR2023",
            code2: "PROJET2023"
        };

        // Fonctions de navigation
       function navigateTo(page) {
    document.querySelectorAll('[id$="-page"]').forEach(el => {
        el.classList.add('hidden-section');
    });
    document.getElementById(`${page}-page`).classList.remove('hidden-section');
    
    if (page === 'business') {
        loadBusinessCards(); // Remplacez loadBusinessProfessionals() par loadBusinessCards()
    }
}

        function showAdminSection() {
            document.getElementById('admin-section').style.display = 'flex';
        }

        function hideAdminSection() {
            document.getElementById('admin-section').style.display = 'none';
        }

        function showAdminDashboard() {
            navigateTo('admin-dashboard');
            loadBusinessProfessionals();
            loadProjects();
        }

        function showAdminForm(formType) {
            hideAllAdminForms();
            document.getElementById(`admin-${formType}-form`).classList.add('active');
            document.getElementById(`admin-${formType}-form`).style.display = 'block';
        }

        function showAdminBusinessList() {
            hideAllAdminForms();
            document.getElementById('admin-business-list').classList.add('active');
            document.getElementById('admin-business-list').style.display = 'block';
        }

        function showAdminProjectList() {
            hideAllAdminForms();
            document.getElementById('admin-project-list').classList.add('active');
            document.getElementById('admin-project-list').style.display = 'block';
        }

     function showBusinessDetails(id, type) {
    const collection = type === 'business' ? 'businesses' : 'projects';
    firebase.firestore().collection(collection).doc(id).get()
        .then(doc => {
            if (doc.exists) {
                const data = doc.data();
                document.getElementById('modal-title').textContent = type === 'business' ? data.metier : data.titre;
                
                let content = '';
                if (type === 'business') {
                    content = `
                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="md:w-1/3">
                                <div class="h-48 bg-gray-200 rounded-lg overflow-hidden mb-4">
                                    <img src="${data.image}" alt="${data.metier}" class="w-full h-full object-cover">
                                </div>
                                <h4 class="text-xl font-bold">${data.nom}</h4>
                                <div class="flex items-center mt-2">
                                    <i class="fas fa-calendar-alt mr-2"></i>
                                    <span>${data.experience} ans d'expérience</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <i class="fas fa-map-marker-alt mr-2"></i>
                                    <span>${data.adresse}</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <i class="fas fa-phone mr-2"></i>
                                    <span>${data.contact}</span>
                                </div>
                                ${data.email ? `<div class="flex items-center mt-2">
                                    <i class="fas fa-envelope mr-2"></i>
                                    <span>${data.email}</span>
                                </div>` : ''}
                            </div>
                            <div class="md:w-2/3">
                                <h4 class="text-lg font-bold mb-2">À propos</h4>
                                <p class="mb-4">${data.description}</p>
                                
                                ${data.website ? `
                                <div class="mb-2">
                                    <a href="${data.website}" target="_blank" class="text-[#9b9c28] hover:underline">
                                        <i class="fas fa-globe mr-2"></i> Site Web
                                    </a>
                                </div>` : ''}
                                
                                ${data.portfolio ? `
                                <div class="mb-4">
                                    <a href="${data.portfolio}" target="_blank" class="text-[#9b9c28] hover:underline">
                                        <i class="fas fa-briefcase mr-2"></i> Portfolio
                                    </a>
                                </div>` : ''}
                                
                                
                            </div>
                        </div>
                    `;
                } else {
                    // Contenu pour les projets (identique à votre version actuelle)
                    content = `
                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="md:w-1/3">
                                <div class="h-48 bg-gray-200 rounded-lg overflow-hidden mb-4">
                                    <img src="${data.image}" alt="${data.titre}" class="w-full h-full object-cover">
                                </div>
                                <h4 class="text-xl font-bold">${data.nom}</h4>
                                <div class="flex items-center mt-2">
                                    <i class="fas fa-money-bill-wave mr-2"></i>
                                    <span>Budget: ${data.budget} FCFA</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <i class="fas fa-clock mr-2"></i>
                                    <span>Délai: ${data.delai}</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <i class="fas fa-phone mr-2"></i>
                                    <span>${data.contact || 'Non spécifié'}</span>
                                </div>
                            </div>
                            <div class="md:w-2/3">
                                <h4 class="text-lg font-bold mb-2">Description du projet</h4>
                                <p class="mb-4">${data.description}</p>
                                ${data.besoins && data.besoins.length > 0 ? `
                                <h4 class="text-lg font-bold mb-2">Besoins</h4>
                                <ul class="list-disc pl-5">
                                    ${data.besoins.map(besoin => `<li>${besoin}</li>`).join('')}
                                </ul>` : ''}
                            </div>
                        </div>
                    `;
                }
                
                document.getElementById('modal-content').innerHTML = content;
                document.getElementById('business-modal').classList.remove('hidden');
            } else {
                alert('Document non trouvé.');
            }
        })
        .catch(error => {
            console.error('Erreur lors du chargement des détails :', error);
            alert('Une erreur est survenue.');
        });
}
    // Charger la liste des métiers dans #admin-business-list
       function loadBusinessList() {
    const businessTableBody = document.getElementById('business-list-body');
    businessTableBody.innerHTML = '<tr><td colspan="3">Chargement...</td></tr>';

    firebase.firestore().collection('businesses').get()
        .then(querySnapshot => {
            businessTableBody.innerHTML = '';
            
            if (querySnapshot.empty) {
                businessTableBody.innerHTML = '<tr><td colspan="3">Aucun métier enregistré</td></tr>';
                return;
            }

            querySnapshot.forEach(doc => {
                const data = doc.data();
                const row = `
                    <tr class="border-b border-gray-700">
                        <td class="px-4 py-3">${data.nom || 'Non spécifié'}</td>
                        <td class="px-4 py-3">${data.metier || 'Non spécifié'}</td>
                        <td class="px-4 py-3 text-center">
                            <button onclick="editBusiness('${doc.id}')" class="text-blue-500 hover:text-blue-400 mr-2">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteBusiness('${doc.id}')" class="text-red-500 hover:text-red-400">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>`;
                businessTableBody.innerHTML += row;
            });
        })
        .catch(error => {
            console.error("Error loading businesses: ", error);
            businessTableBody.innerHTML = '<tr><td colspan="3">Erreur de chargement</td></tr>';
        });
}

function loadProjectList() {
    const projectTableBody = document.getElementById('project-list-body');
    projectTableBody.innerHTML = '<tr><td colspan="4">Chargement...</td></tr>';

    firebase.firestore().collection('projects').get()
        .then(querySnapshot => {
            projectTableBody.innerHTML = '';
            
            if (querySnapshot.empty) {
                projectTableBody.innerHTML = '<tr><td colspan="4">Aucun projet enregistré</td></tr>';
                return;
            }

            querySnapshot.forEach(doc => {
                const data = doc.data();
                const row = `
                    <tr class="border-b border-gray-700">
                        <td class="px-4 py-3">${data.titre || 'Non spécifié'}</td>
                        <td class="px-4 py-3">${data.nom || 'Non spécifié'}</td>
                        <td class="px-4 py-3">${data.budget || '0'} FCFA</td>
                        <td class="px-4 py-3 text-center">
                            <button onclick="editProject('${doc.id}')" class="text-blue-500 hover:text-blue-400 mr-2">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteProject('${doc.id}')" class="text-red-500 hover:text-red-400">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>`;
                projectTableBody.innerHTML += row;
            });
        })
        .catch(error => {
            console.error("Error loading projects: ", error);
            projectTableBody.innerHTML = '<tr><td colspan="4">Erreur de chargement</td></tr>';
        });
}
        function hideBusinessDetails() {
    document.getElementById('business-modal').classList.add('hidden');
}

        function showSuccessMessage(type) {
            document.getElementById(`success-${type}`).style.display = 'flex';
        }

       function hideSuccessMessage(type) {
    document.getElementById(`success-${type}`).style.display = 'none';
}

        // Fonctions utilitaires
        function hideAllAdminForms() {
            const adminForms = document.querySelectorAll('#admin-dashboard .form-container');
            adminForms.forEach(form => {
                form.style.display = 'none';
                form.classList.remove('active');
            });
        }

        function resetForm(formId) {
            document.getElementById(formId).reset();
        }

        function resetAdminForm(formType) {
            document.getElementById(`admin${formType.charAt(0).toUpperCase() + formType.slice(1)}Form`).reset();
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Fonctions Firebase et EmailJS
      async function sendConfirmationEmail(nom, email) {
            try {
                // On utilise le compte SECONDARY pour la confirmation
                await emailjs.init("b7VZLL9unc4ONEPby"); // Clé publique du 2ème compte
                await emailjs.send("service_v9clrbi", "template_p5w3d7a", {
                    nom: nom,
                    email: email
                });
                console.log("✅ Email de confirmation envoyé à :", email);
            } catch (error) {
                console.error("❌ Erreur lors de l'envoi de la confirmation :", error);
            }
        }

        // Fonction pour soumettre le formulaire de promotion
        function submitPromotionForm() {
            // Récupérer les valeurs des champs
            const nom = document.getElementById('nom').value;
            const dob = document.getElementById('dob').value;
            const membre = document.querySelector('input[name="membre"]:checked')?.value;
            const metier = document.getElementById('metier').value;
            const experience = document.getElementById('experience').value;
            const description = document.getElementById('description').value;
            const adresse = document.getElementById('adresse').value;
            const contact = document.getElementById('contact').value;
            const email = document.getElementById('email').value;
            const besoins = Array.from(document.querySelectorAll('input[name="besoins"]:checked')).map(input => input.value).join(', ');

            // Vérifier que tous les champs requis sont remplis
            if (!nom || !dob || !membre || !metier || !experience || !description || !adresse || !contact || !email) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

            // Valider le format de l'email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Veuillez entrer une adresse email valide.');
                return;
            }

            // Désactiver le bouton pendant l'envoi
            const submitButton = document.querySelector('#promotionForm button[type="button"]');
            submitButton.disabled = true;
            submitButton.innerHTML = 'Envoi en cours...';

            // Envoyer l'email via EmailJS
            emailjs.send('service_s761d89', 'template_01ycegg', {
                nom,
                dob,
                membre,
                metier,
                experience,
                description,
                adresse,
                contact,
                email,
                besoins
            })
           .then(() => {
    sendConfirmationEmail(nom, email);
    
    // Afficher le message
    const successPopup = document.getElementById('success-promotion');
    document.getElementById('success-promotion-message').textContent = 
        `Votre message a été soumis, ${nom}. Ansar vous contactera dans un délai de 24 à 48H.`;
    successPopup.style.display = 'flex'; // Afficher la popup
    
    // Réinitialiser le formulaire
    document.getElementById('promotionForm').reset();
    
    // Réactiver le bouton
    submitButton.disabled = false;
    submitButton.innerHTML = 'Envoyer mon dossier';
})
            .catch(error => {
                console.error('Erreur lors de l\'envoi de l\'email:', error);
                alert('Une erreur est survenue lors de l\'envoi. Veuillez réessayer.');
                // Réactiver le bouton
                submitButton.disabled = false;
                submitButton.innerHTML = 'Envoyer mon dossier';
            });
        }

        function submitFinancementForm() {
            const formData = {
                nom: document.getElementById('f-nom').value,
                dob: document.getElementById('f-dob').value,
                membre: document.querySelector('input[name="f-membre"]:checked').value,
                titre: document.getElementById('titre-projet').value,
                description: document.getElementById('description-projet').value,
                budget: document.getElementById('budget').value,
                delai: document.getElementById('delai').value,
                besoins: Array.from(document.querySelectorAll('input[name="f-besoins"]:checked')).map(el => el.value),
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };

            // Enregistrement dans Firebase
            db.collection("financements").add(formData)
                .then(() => {
                    // Envoi d'email via EmailJS
                    const emailParams = {
                        to_name: formData.nom,
                        to_email: "votre-email@ansar-projet.com", // Email de destination
                        projet_titre: formData.titre,
                        projet_budget: formData.budget,
                        projet_delai: formData.delai,
                        contact: formData.contact,
                        besoins: formData.besoins.join(", "),
                        message: `Nouvelle demande de financement pour le projet: ${formData.titre}`
                    };

                    emailjs.send("YOUR_EMAILJS_SERVICE_ID", "YOUR_EMAILJS_TEMPLATE_ID", emailParams)
                        .then(() => {
                            resetForm('financementForm');
                            showSuccessMessage('financement');
                        })
                        .catch(emailError => {
                            console.error("Email sending failed:", emailError);
                            resetForm('financementForm');
                            showSuccessMessage('financement');
                        });
                })
                .catch(error => {
                    console.error("Error adding document: ", error);
                    alert("Une erreur est survenue. Veuillez réessayer.");
                });
        }

        function saveBusiness() {
            const businessData = {
                nom: document.getElementById('a-nom').value,
                dob: document.getElementById('a-dob').value,
                membre: document.getElementById('a-membre').value,
                metier: document.getElementById('a-metier').value,
                experience: parseInt(document.getElementById('a-experience').value),
                description: document.getElementById('a-description').value,
                adresse: document.getElementById('a-adresse').value,
                contact: document.getElementById('a-contact').value,
                email: document.getElementById('a-email').value,
                image: document.getElementById('a-image').value || 'https://via.placeholder.com/150',
                services: Array.from(document.querySelectorAll('input[name="a-services"]:checked')).map(input => input.value),
                website: document.getElementById('a-website').value || '', // Ajout du champ Site Web
                portfolio: document.getElementById('a-portfolio').value || '', // Ajout du champ Portfolio
                createdAt: new Date()
            };

          if (!businessData.nom || !businessData.metier || !businessData.experience || !businessData.description || !businessData.adresse || !businessData.contact) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

           firebase.firestore().collection('businesses').add(businessData)
                .then(() => {
                    alert('Métier enregistré avec succès !');
                    document.getElementById('adminPromotionForm').reset();
                    showAdminForm('promotion');
                })
                .catch(error => {
                    console.error('Erreur lors de l\'enregistrement du métier :', error);
                    alert('Une erreur est survenue lors de l\'enregistrement.');
                });
        }

        function saveProject() {
            const projectData = {
                nom: document.getElementById('af-nom').value,
                dob: document.getElementById('af-dob').value,
                membre: document.getElementById('af-membre').value,
                titre: document.getElementById('af-titre').value,
                description: document.getElementById('af-description').value,
                budget: parseInt(document.getElementById('af-budget').value),
                delai: document.getElementById('af-delai').value,
                image: document.getElementById('af-image').value || 'https://via.placeholder.com/150',
                besoins: Array.from(document.querySelectorAll('input[name="af-besoins"]:checked')).map(input => input.value),
                website: document.getElementById('af-website').value || '', // Ajout du champ Site Web
                portfolio: document.getElementById('af-portfolio').value || '', // Ajout du champ Portfolio
                createdAt: new Date()
            };

            if (!projectData.nom || !projectData.titre || !projectData.description || !projectData.budget || !projectData.delai) {
                alert('Veuillez remplir tous les champs obligatoires.');
                return;
            }

            firebase.firestore().collection('projects').add(projectData)
                .then(() => {
                    alert('Projet enregistré avec succès !');
                    document.getElementById('adminFinancementForm').reset();
                    showAdminForm('financement');
                })
                .catch(error => {
                    console.error('Erreur lors de l\'enregistrement du projet :', error);
                    alert('Une erreur est survenue.');
                });
        }


        async function loadBusinessCards() {
            console.log('loadBusinessCards: Début');
            const businessCards = document.getElementById('business-cards');

            // Vérifier si le conteneur existe
            if (!businessCards) {
                console.error('Conteneur #business-cards introuvable');
                return;
            }

            // Afficher un message de chargement
            businessCards.innerHTML = '<p class="text-gray-600 text-center">Chargement...</p>';

            try {
                // Charger les professionnels depuis Firestore
                console.log('loadBusinessCards: Chargement des professionnels Firestore');
                const businessSnapshot = await firebase.firestore().collection('businesses').orderBy('createdAt', 'desc').get();

                // Mapper les données des professionnels
                const businesses = businessSnapshot.docs.map(doc => ({
                    id: doc.id,
                    type: 'business',
                    ...doc.data()
                }));
                console.log('loadBusinessCards: Professionnels chargés', businesses);

                // Vérifier si des professionnels existent
                if (businesses.length === 0) {
                    console.log('loadBusinessCards: Aucun professionnel disponible');
                    businessCards.innerHTML = '<p class="text-gray-600 text-center">Aucun professionnel disponible.</p>';
                    return;
                }

                // Générer le HTML des cartes pour les professionnels
                const cardHTML = businesses.map(business => `
                    <div class="business-card">
                        <div class="h-48 bg-blue-500 flex items-center justify-center">
                            <img src="${business.image}" alt="${business.metier}" class="w-full h-full object-cover">
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-emerald-500 mb-2">${business.metier}</h3>
                            <p class="text-[#FFD700] mb-2">${business.nom}</p>
                            <div class="flex items-center text-white mb-2">
                                <i class="fas fa-calendar-alt mr-2"></i>
                                <span>${business.experience} ans d'expérience</span>
                            </div>
                            <div class="flex items-center text-white mb-4">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                <span>${business.adresse}</span>
                            </div>
                            <button onclick="showBusinessDetails('${business.id}', 'business')" class="w-full bg-[#9b9c28] hover:bg-[#FFDB58] text-white font-bold py-2 px-4 rounded transition duration-300">
                                En savoir plus
                            </button>
                        </div>
                    </div>
                `).join('');
                console.log('loadBusinessCards: HTML généré', cardHTML);

                // Injecter le HTML dans le conteneur
                businessCards.innerHTML = cardHTML;
                console.log('loadBusinessCards: HTML injecté dans le conteneur');
            } catch (error) {
                console.error('loadBusinessCards: Erreur lors du chargement', error);
                businessCards.innerHTML = '<p class="text-red-600 text-center">Erreur lors du chargement des professionnels.</p>';
            }
        }


        function loadProjects() {
            db.collection("projects").get().then((querySnapshot) => {
                const projectList = document.getElementById('project-list-body');
                projectList.innerHTML = '';
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const projectId = doc.id;
                    
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-700 hover:bg-gray-800/30';
                    row.innerHTML = `
                        <td class="px-4 py-3">${data.titre}</td>
                        <td class="px-4 py-3">${data.nom}</td>
                        <td class="px-4 py-3">${data.budget} €</td>
                        <td class="px-4 py-3">
                            <button onclick="editProject('${projectId}')" class="text-yellow-500 hover:text-yellow-400 mr-2">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteProject('${projectId}')" class="text-red-500 hover:text-red-400">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    `;
                    projectList.appendChild(row);
                });
            });
        }

          // Éditer un métier
     function editBusiness(businessId) {
    firebase.firestore().collection('businesses').doc(businessId).get()
        .then(doc => {
            if (doc.exists) {
                const data = doc.data();
                document.getElementById('a-nom').value = data.nom;
                document.getElementById('a-dob').value = data.dob || '';
                document.getElementById('a-membre').value = data.membre;
                document.getElementById('a-metier').value = data.metier;
                document.getElementById('a-experience').value = data.experience;
                document.getElementById('a-description').value = data.description;
                document.getElementById('a-adresse').value = data.adresse;
                document.getElementById('a-contact').value = data.contact;
                document.getElementById('a-email').value = data.email || '';
                document.getElementById('a-image').value = data.image || '';
                
                // Gestion des champs optionnels
                const websiteField = document.getElementById('a-website');
                const portfolioField = document.getElementById('a-portfolio');
                if (websiteField) websiteField.value = data.website || '';
                if (portfolioField) portfolioField.value = data.portfolio || '';
                
                // Gestion des cases à cocher
                if (data.services) {
                    document.querySelectorAll('input[name="a-services"]').forEach(input => {
                        input.checked = data.services.includes(input.value);
                    });
                }

                const saveButton = document.querySelector('#adminPromotionForm button');
                saveButton.textContent = 'Mettre à jour';
                saveButton.onclick = () => updateBusiness(businessId);
                showAdminForm('promotion');
            }
        })
        .catch(error => {
            console.error('Erreur lors du chargement du métier :', error);
            alert('Une erreur est survenue lors du chargement du métier.');
        });
}

     function updateBusiness(businessId) {
    const businessData = {
        nom: document.getElementById('a-nom').value,
        dob: document.getElementById('a-dob').value,
        membre: document.getElementById('a-membre').value,
        metier: document.getElementById('a-metier').value,
        experience: parseInt(document.getElementById('a-experience').value),
        description: document.getElementById('a-description').value,
        adresse: document.getElementById('a-adresse').value,
        contact: document.getElementById('a-contact').value,
        email: document.getElementById('a-email').value,
        image: document.getElementById('a-image').value || 'https://via.placeholder.com/150',
        services: Array.from(document.querySelectorAll('input[name="a-services"]:checked')).map(input => input.value),
        updatedAt: new Date()
    };

    // Ajout des champs optionnels si ils existent
    const websiteField = document.getElementById('a-website');
    const portfolioField = document.getElementById('a-portfolio');
    if (websiteField) businessData.website = websiteField.value;
    if (portfolioField) businessData.portfolio = portfolioField.value;

    firebase.firestore().collection('businesses').doc(businessId).update(businessData)
        .then(() => {
            alert('Métier mis à jour avec succès !');
            document.getElementById('adminPromotionForm').reset();
            const saveButton = document.querySelector('#adminPromotionForm button');
            saveButton.textContent = 'Enregistrer';
            saveButton.onclick = saveBusiness;
            showAdminBusinessList();
        })
        .catch(error => {
            console.error('Erreur lors de la mise à jour du métier :', error);
            alert('Une erreur est survenue lors de la mise à jour.');
        });
}

         // Supprimer un métier
     function deleteBusiness(businessId) {
    if (confirm('Voulez-vous vraiment supprimer ce métier ?')) {
        firebase.firestore().collection('businesses').doc(businessId).delete()
            .then(() => {
                alert('Métier supprimé avec succès !');
                loadBusinessList();
            })
            .catch(error => {
                console.error('Erreur lors de la suppression du métier :', error);
                alert('Une erreur est survenue.');
            });
    }
}
     function editProject(projectId) {
    firebase.firestore().collection('projects').doc(projectId).get()
        .then(doc => {
            if (doc.exists) {
                const data = doc.data();
                document.getElementById('af-nom').value = data.nom;
                document.getElementById('af-dob').value = data.dob || '';
                document.getElementById('af-membre').value = data.membre;
                document.getElementById('af-titre').value = data.titre;
                document.getElementById('af-description').value = data.description;
                document.getElementById('af-budget').value = data.budget;
                document.getElementById('af-delai').value = data.delai;
                document.getElementById('af-image').value = data.image || '';
                document.getElementById('af-website').value = data.website || ''; // Ajout du champ Site Web
                document.getElementById('af-portfolio').value = data.portfolio || ''; // Ajout du champ Portfolio
                document.querySelectorAll('input[name="af-besoins"]').forEach(input => {
                    input.checked = data.besoins.includes(input.value);
                });

                const saveButton = document.querySelector('#adminFinancementForm button');
                saveButton.textContent = 'Mettre à jour';
                saveButton.onclick = () => updateProject(projectId);
                showAdminForm('financement');
            }
        })
        .catch(error => {
            console.error('Erreur lors du chargement du projet :', error);
            alert('Une erreur est survenue.');
        });
}

     function updateProject(projectId) {
    const projectData = {
        nom: document.getElementById('af-nom').value,
        dob: document.getElementById('af-dob').value,
        membre: document.getElementById('af-membre').value,
        titre: document.getElementById('af-titre').value,
        description: document.getElementById('af-description').value,
        budget: parseInt(document.getElementById('af-budget').value),
        delai: document.getElementById('af-delai').value,
        image: document.getElementById('af-image').value || 'https://via.placeholder.com/150',
        besoins: Array.from(document.querySelectorAll('input[name="af-besoins"]:checked')).map(input => input.value),
        website: document.getElementById('af-website').value || '', // Ajout du champ Site Web
        portfolio: document.getElementById('af-portfolio').value || '', // Ajout du champ Portfolio
        updatedAt: new Date()
    };

    firebase.firestore().collection('projects').doc(projectId).update(projectData)
        .then(() => {
            alert('Projet mis à jour avec succès !');
            document.getElementById('adminFinancementForm').reset();
            const saveButton = document.querySelector('#adminFinancementForm button');
            saveButton.textContent = 'Enregistrer';
            saveButton.onclick = saveProject;
            showAdminProjectList();
        })
        .catch(error => {
            console.error('Erreur lors de la mise à jour du projet :', error);
            alert('Une erreur est survenue.');
        });
}


   function deleteProject(projectId) {
    if (confirm('Voulez-vous vraiment supprimer ce projet ?')) {
        firebase.firestore().collection('projects').doc(projectId).delete()
            .then(() => {
                alert('Projet supprimé avec succès !');
                loadProjectList();
            })
            .catch(error => {
                console.error('Erreur lors de la suppression du projet :', error);
                alert('Une erreur est survenue.');
            });
    }
}

        function verifyAdminCodes() {
    const code1 = document.getElementById('code1').value;
    const code2 = document.getElementById('code2').value;

    if (code1 === 'admin123' && code2 === 'admin456') {
        document.getElementById('admin-section').classList.add('hidden-section');
        document.getElementById('admin-dashboard').classList.remove('hidden-section');
        loadBusinessList(); // Ajoutez cette ligne
        loadProjectList();  // Ajoutez cette ligne
    } else {
        alert('Codes incorrects. Espace réservé aux admin.');
    }
}
function navigateTo(page) {
    // Masque toutes les sections
    document.querySelectorAll('[id$="-page"], [id$="-section"]').forEach(el => {
        el.classList.add('hidden-section');
    });
    
    // Affiche la page demandée
    if (page === 'home') {
        document.getElementById('home-page').classList.remove('hidden-section');
        // Réinitialise l'admin si besoin
        document.getElementById('admin-section').classList.add('hidden-section');
        document.getElementById('admin-dashboard').classList.add('hidden-section');
    } else {
        document.getElementById(`${page}-page`).classList.remove('hidden-section');
    }
}

        // Initialisation au chargement de la page
      document.addEventListener('DOMContentLoaded', function() {
    console.log('DOMContentLoaded: Page chargée');
    
    // Charger les professionnels pour la section Business
    loadBusinessCards();
    
    // Supprimer cette ligne qui affichait une section par défaut
    // showProjetSection('business'); 
});
    </script>
</body>
</html>
